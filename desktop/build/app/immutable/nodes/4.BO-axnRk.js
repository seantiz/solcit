import{s as _e,e as E,t as ne,a as j,c as F,b as M,d as se,f as h,g as B,m as C,i as A,h as k,w as ee,j as me,n as te,v as ke,B as ge,y as O,l as re,G as ie,H as le,k as ue,I as oe,A as ce,J as $e,r as xe,z as G}from"../chunks/scheduler.D6LveowX.js";import{S as ve,i as be,d as H,e as R,m as z,t as q,c as he,a as L,f as J,g as we,b as Y}from"../chunks/index.BX5eqv6I.js";import{a as ae,n as X,c as fe,B as K}from"../chunks/jobApplication.EIarE9WW.js";import{_ as De,r as Pe,B as pe,a as ye,j as D,w as Ee,P as de,b as Fe}from"../chunks/jobIO.DcVUEWxr.js";function Me(a){return new Worker(""+new URL("../workers/pdf.worker-C2CnNrcp.js",import.meta.url).href,{name:a==null?void 0:a.name})}function Ve(a){let t,n="Upload PDF",r,s;return{c(){t=E("button"),t.textContent=n,this.h()},l(f){t=F(f,"BUTTON",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1xucqve"&&(t.textContent=n),this.h()},h(){C(t,"class","w-full rounded-md border border-transparent bg-yellow-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2")},m(f,c){A(f,t,c),r||(s=ee(t,"click",a[5]),r=!0)},p:te,d(f){f&&h(t),r=!1,s()}}}function Te(a){let t,n,r,s,f,c,u,m,i,l,x="Remove",p,d;return{c(){t=E("div"),n=E("div"),r=ie("svg"),s=ie("path"),f=ie("path"),c=j(),u=E("span"),m=ne(a[1]),i=j(),l=E("button"),l.textContent=x,this.h()},l(b){t=F(b,"DIV",{class:!0});var g=M(t);n=F(g,"DIV",{class:!0});var y=M(n);r=le(y,"svg",{class:!0,fill:!0,viewBox:!0});var v=M(r);s=le(v,"path",{d:!0}),M(s).forEach(h),f=le(v,"path",{d:!0}),M(f).forEach(h),v.forEach(h),c=B(y),u=F(y,"SPAN",{class:!0});var I=M(u);m=se(I,a[1]),I.forEach(h),y.forEach(h),i=B(g),l=F(g,"BUTTON",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-1ruhfxq"&&(l.textContent=x),g.forEach(h),this.h()},h(){C(s,"d","M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"),C(f,"d","M3 8a2 2 0 012-2v10h2a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"),C(r,"class","mr-2 h-8 w-8 text-red-500"),C(r,"fill","currentColor"),C(r,"viewBox","0 0 20 20"),C(u,"class","max-w-xs truncate text-sm font-medium text-gray-900 dark:text-slate-300"),C(n,"class","flex items-center"),C(l,"class","ml-2 text-sm font-medium text-red-600 hover:text-red-500"),C(t,"class","flex items-center justify-between rounded-lg bg-gray-100 p-3 dark:bg-slate-950")},m(b,g){A(b,t,g),k(t,n),k(n,r),k(r,s),k(r,f),k(n,c),k(n,u),k(u,m),k(t,i),k(t,l),p||(d=ee(l,"click",a[6]),p=!0)},p(b,g){g&2&&me(m,b[1])},d(b){b&&h(t),p=!1,d()}}}function je(a){let t,n,r,s,f,c,u,m,i,l,x,p;function d(y,v){return y[1]?Te:Ve}let b=d(a),g=b(a);return{c(){t=E("div"),n=E("h2"),r=ne(a[0]),s=j(),f=E("div"),c=E("input"),u=j(),g.c(),m=j(),i=E("div"),l=E("canvas"),this.h()},l(y){t=F(y,"DIV",{class:!0});var v=M(t);n=F(v,"H2",{class:!0});var I=M(n);r=se(I,a[0]),I.forEach(h),s=B(v),f=F(v,"DIV",{class:!0});var V=M(f);c=F(V,"INPUT",{type:!0,accept:!0,class:!0}),u=B(V),g.l(V),V.forEach(h),m=B(v),i=F(v,"DIV",{class:!0});var S=M(i);l=F(S,"CANVAS",{class:!0}),M(l).forEach(h),S.forEach(h),v.forEach(h),this.h()},h(){C(n,"class","mb-4 text-center text-xl font-bold"),C(c,"type","file"),C(c,"accept",".pdf"),C(c,"class","hidden"),C(f,"class","mb-4"),C(l,"class","dark:invert"),C(i,"class","mt-4"),C(t,"class","mx-auto w-full max-w-md")},m(y,v){A(y,t,v),k(t,n),k(n,r),k(t,s),k(t,f),k(f,c),a[9](c),k(f,u),g.m(f,null),k(t,m),k(t,i),k(i,l),a[10](l),a[11](i),x||(p=ee(c,"change",a[7]),x=!0)},p(y,[v]){v&1&&me(r,y[0]),b===(b=d(y))&&g?g.p(y,v):(g.d(1),g=b(y),g&&(g.c(),g.m(f,null)))},i:te,o:te,d(y){y&&h(t),a[9](null),g.d(),a[10](null),a[11](null),x=!1,p()}}}function Be(a,t,n){De.workerPort=new Me;let{title:r}=t,{filename:s}=t,f=null,c="",u=null,m,i,l;function x(){l.click()}function p(){if(n(1,c=""),f=null,n(8,s=""),u&&(u.destroy(),u=null),m){const _=m.getContext("2d");_&&_.clearRect(0,0,m.width,m.height)}d("fileUpdate",{filename:"",file:null})}const d=ke();ge(async()=>{if(s)try{const _=await Pe(s,{dir:pe.Document});f=new Blob([_],{type:"application/pdf"}),y(),await v()}catch{n(1,c="No PDF file uploaded yet.")}});async function b(_){var T;const $=(T=_.target.files)==null?void 0:T[0];$&&$.type==="application/pdf"?(p(),f=$,n(8,s=$.name),d("fileUpdate",{filename:s,file:$}),await g(),y(),await v()):D.showMessage("Please select a PDF file")}async function g(){if(f)try{const _=await f.arrayBuffer();await Ee(s,_,{dir:pe.Document}),D.showMessage(`Your CV: ${r} is saved!`)}catch{D.showMessage(`Couldn't save ${r}. Please try again.`)}}function y(){f?n(1,c=`PDF file uploaded. Size: ${f.size} bytes`):n(1,c="No PDF file uploaded yet.")}async function v(){if(f&&m)try{const _=await f.arrayBuffer();u=await ye(new Uint8Array(_)).promise;const w=await u.getPage(1),$=i?i.clientWidth:window.innerWidth,T=w.getViewport({scale:1}),e=$/T.width*1,o=w.getViewport({scale:e});n(2,m.height=o.height,m),n(2,m.width=o.width,m);const P=m.getContext("2d");if(P){const N={canvasContext:P,viewport:o,background:"transparent"};P.globalCompositeOperation="difference",P.fillStyle="white",P.fillRect(0,0,m.width,m.height),P.globalCompositeOperation="source-over",await w.render(N)}else console.error("Canvas context is null or undefined.")}catch(_){D.showMessage(`Error loading PDF: ${_}`)}}function I(_){O[_?"unshift":"push"](()=>{l=_,n(4,l)})}function V(_){O[_?"unshift":"push"](()=>{m=_,n(2,m)})}function S(_){O[_?"unshift":"push"](()=>{i=_,n(3,i)})}return a.$$set=_=>{"title"in _&&n(0,r=_.title),"filename"in _&&n(8,s=_.filename)},[r,c,m,i,l,x,p,b,s,I,V,S]}class Ie extends ve{constructor(t){super(),be(this,t,Be,je,_e,{title:0,filename:8})}}function Ae(a){let t,n,r,s="Try Automatically Extracting My Details âš ",f,c,u,m,i,l,x,p,d,b,g;const y=[Ne,Ue],v=[];function I(w,$){return w[1]?0:1}i=I(a),l=v[i]=y[i](a);function V(w,$){return w[1]?Le:qe}let S=V(a),_=S(a);return{c(){t=E("div"),n=E("div"),r=E("button"),r.textContent=s,f=j(),c=E("form"),u=E("input"),m=j(),l.c(),x=j(),p=E("button"),_.c(),this.h()},l(w){t=F(w,"DIV",{class:!0});var $=M(t);n=F($,"DIV",{class:!0});var T=M(n);r=F(T,"BUTTON",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-1c1cu7m"&&(r.textContent=s),T.forEach(h),f=B($),c=F($,"FORM",{class:!0});var U=M(c);u=F(U,"INPUT",{placeholder:!0,class:!0}),m=B(U),l.l(U),x=B(U),p=F(U,"BUTTON",{type:!0,class:!0});var e=M(p);_.l(e),e.forEach(h),U.forEach(h),$.forEach(h),this.h()},h(){C(r,"class","mt-4 rounded-md bg-neutral-700 px-4 py-2 text-white hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"),C(n,"class","mb-4 flex justify-center"),C(u,"placeholder","Full Name"),C(u,"class","w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-600 dark:bg-transparent dark:text-neutral-100"),C(p,"type","submit"),C(p,"class","w-full rounded-md bg-yellow-600 px-4 py-2 text-white hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2"),C(c,"class","space-y-2"),C(t,"class","w-full")},m(w,$){A(w,t,$),k(t,n),k(n,r),k(t,f),k(t,c),k(c,u),ce(u,a[3].name),k(c,m),v[i].m(c,null),k(c,x),k(c,p),_.m(p,null),d=!0,b||(g=[ee(r,"click",a[4]),ee(u,"input",a[7]),ee(c,"submit",$e(a[6]))],b=!0)},p(w,$){$&8&&u.value!==w[3].name&&ce(u,w[3].name);let T=i;i=I(w),i===T?v[i].p(w,$):(we(),q(v[T],1,1,()=>{v[T]=null}),he(),l=v[i],l?l.p(w,$):(l=v[i]=y[i](w),l.c()),L(l,1),l.m(c,x)),S!==(S=V(w))&&(_.d(1),_=S(w),_&&(_.c(),_.m(p,null)))},i(w){d||(L(l),d=!0)},o(w){q(l),d=!1},d(w){w&&h(t),v[i].d(),_.d(),b=!1,xe(g)}}}function Se(a){let t,n="Processing CV...";return{c(){t=E("p"),t.textContent=n},l(r){t=F(r,"P",{"data-svelte-h":!0}),re(t)!=="svelte-it0xgy"&&(t.textContent=n)},m(r,s){A(r,t,s)},p:te,i:te,o:te,d(r){r&&h(t)}}}function Ue(a){let t,n,r,s,f,c,u,m,i,l,x,p,d,b,g;function y(e){a[13](e)}let v={placeholder:"My Experience"};a[3].experience!==void 0&&(v.value=a[3].experience),t=new K({props:v}),O.push(()=>Y(t,"value",y));function I(e){a[14](e)}let V={placeholder:"My Interests"};a[3].interests!==void 0&&(V.value=a[3].interests),s=new K({props:V}),O.push(()=>Y(s,"value",I));function S(e){a[15](e)}let _={placeholder:"My Projects"};a[3].projects!==void 0&&(_.value=a[3].projects),u=new K({props:_}),O.push(()=>Y(u,"value",S));function w(e){a[16](e)}let $={placeholder:"My Education"};a[3].education!==void 0&&($.value=a[3].education),l=new K({props:$}),O.push(()=>Y(l,"value",w));function T(e){a[17](e)}let U={placeholder:"My Certified Skills"};return a[3].certificates!==void 0&&(U.value=a[3].certificates),d=new K({props:U}),O.push(()=>Y(d,"value",T)),{c(){H(t.$$.fragment),r=j(),H(s.$$.fragment),c=j(),H(u.$$.fragment),i=j(),H(l.$$.fragment),p=j(),H(d.$$.fragment)},l(e){R(t.$$.fragment,e),r=B(e),R(s.$$.fragment,e),c=B(e),R(u.$$.fragment,e),i=B(e),R(l.$$.fragment,e),p=B(e),R(d.$$.fragment,e)},m(e,o){z(t,e,o),A(e,r,o),z(s,e,o),A(e,c,o),z(u,e,o),A(e,i,o),z(l,e,o),A(e,p,o),z(d,e,o),g=!0},p(e,o){const P={};!n&&o&8&&(n=!0,P.value=e[3].experience,G(()=>n=!1)),t.$set(P);const N={};!f&&o&8&&(f=!0,N.value=e[3].interests,G(()=>f=!1)),s.$set(N);const W={};!m&&o&8&&(m=!0,W.value=e[3].projects,G(()=>m=!1)),u.$set(W);const Q={};!x&&o&8&&(x=!0,Q.value=e[3].education,G(()=>x=!1)),l.$set(Q);const Z={};!b&&o&8&&(b=!0,Z.value=e[3].certificates,G(()=>b=!1)),d.$set(Z)},i(e){g||(L(t.$$.fragment,e),L(s.$$.fragment,e),L(u.$$.fragment,e),L(l.$$.fragment,e),L(d.$$.fragment,e),g=!0)},o(e){q(t.$$.fragment,e),q(s.$$.fragment,e),q(u.$$.fragment,e),q(l.$$.fragment,e),q(d.$$.fragment,e),g=!1},d(e){e&&(h(r),h(c),h(i),h(p)),J(t,e),J(s,e),J(u,e),J(l,e),J(d,e)}}}function Ne(a){let t,n,r,s,f,c,u,m,i,l,x,p,d,b,g;function y(e){a[8](e)}let v={placeholder:"My Experience"};a[1].experience!==void 0&&(v.value=a[1].experience),t=new K({props:v}),O.push(()=>Y(t,"value",y));function I(e){a[9](e)}let V={placeholder:"Interests"};a[1].interests!==void 0&&(V.value=a[1].interests),s=new K({props:V}),O.push(()=>Y(s,"value",I));function S(e){a[10](e)}let _={placeholder:"My Projects"};a[1].projects!==void 0&&(_.value=a[1].projects),u=new K({props:_}),O.push(()=>Y(u,"value",S));function w(e){a[11](e)}let $={placeholder:"My Education"};a[1].education!==void 0&&($.value=a[1].education),l=new K({props:$}),O.push(()=>Y(l,"value",w));function T(e){a[12](e)}let U={placeholder:"My Certified Skills"};return a[1].certificates!==void 0&&(U.value=a[1].certificates),d=new K({props:U}),O.push(()=>Y(d,"value",T)),{c(){H(t.$$.fragment),r=j(),H(s.$$.fragment),c=j(),H(u.$$.fragment),i=j(),H(l.$$.fragment),p=j(),H(d.$$.fragment)},l(e){R(t.$$.fragment,e),r=B(e),R(s.$$.fragment,e),c=B(e),R(u.$$.fragment,e),i=B(e),R(l.$$.fragment,e),p=B(e),R(d.$$.fragment,e)},m(e,o){z(t,e,o),A(e,r,o),z(s,e,o),A(e,c,o),z(u,e,o),A(e,i,o),z(l,e,o),A(e,p,o),z(d,e,o),g=!0},p(e,o){const P={};!n&&o&2&&(n=!0,P.value=e[1].experience,G(()=>n=!1)),t.$set(P);const N={};!f&&o&2&&(f=!0,N.value=e[1].interests,G(()=>f=!1)),s.$set(N);const W={};!m&&o&2&&(m=!0,W.value=e[1].projects,G(()=>m=!1)),u.$set(W);const Q={};!x&&o&2&&(x=!0,Q.value=e[1].education,G(()=>x=!1)),l.$set(Q);const Z={};!b&&o&2&&(b=!0,Z.value=e[1].certificates,G(()=>b=!1)),d.$set(Z)},i(e){g||(L(t.$$.fragment,e),L(s.$$.fragment,e),L(u.$$.fragment,e),L(l.$$.fragment,e),L(d.$$.fragment,e),g=!0)},o(e){q(t.$$.fragment,e),q(s.$$.fragment,e),q(u.$$.fragment,e),q(l.$$.fragment,e),q(d.$$.fragment,e),g=!1},d(e){e&&(h(r),h(c),h(i),h(p)),J(t,e),J(s,e),J(u,e),J(l,e),J(d,e)}}}function qe(a){let t;return{c(){t=ne("Save My Details")},l(n){t=se(n,"Save My Details")},m(n,r){A(n,t,r)},d(n){n&&h(t)}}}function Le(a){let t;return{c(){t=ne("Accept and Save Extracted Details")},l(n){t=se(n,"Accept and Save Extracted Details")},m(n,r){A(n,t,r)},d(n){n&&h(t)}}}function Oe(a){let t,n,r,s,f,c,u,m;r=new Ie({props:{title:"Current CV",filename:a[2]}}),r.$on("fileUpdate",a[5]);const i=[Se,Ae],l=[];function x(p,d){return p[0]?0:1}return c=x(a),u=l[c]=i[c](a),{c(){t=E("div"),n=E("div"),H(r.$$.fragment),s=j(),f=E("div"),u.c(),this.h()},l(p){t=F(p,"DIV",{class:!0});var d=M(t);n=F(d,"DIV",{class:!0});var b=M(n);R(r.$$.fragment,b),b.forEach(h),s=B(d),f=F(d,"DIV",{class:!0});var g=M(f);u.l(g),g.forEach(h),d.forEach(h),this.h()},h(){C(n,"class","flex w-1/2 flex-grow justify-center"),C(f,"class","flex w-1/2 flex-grow justify-center pr-10"),C(t,"class","flex h-screen w-full")},m(p,d){A(p,t,d),k(t,n),z(r,n,null),k(t,s),k(t,f),l[c].m(f,null),m=!0},p(p,[d]){const b={};d&4&&(b.filename=p[2]),r.$set(b);let g=c;c=x(p),c===g?l[c].p(p,d):(we(),q(l[g],1,1,()=>{l[g]=null}),he(),u=l[c],u?u.p(p,d):(u=l[c]=i[c](p),u.c()),L(u,1),u.m(f,null))},i(p){m||(L(r.$$.fragment,p),L(u),m=!0)},o(p){q(r.$$.fragment,p),q(u),m=!1},d(p){p&&h(t),J(r),l[c].d()}}}function We(a){return(a.replace(/\s+/g," ").trim().match(/[^.!?]+[.!?]+/g)||[]).map(r=>r.trim())}function He(a,t,n){let r,s;ue(a,ae,e=>n(2,r=e)),ue(a,X,e=>n(3,s=e));let f=!1,c=null,u=null,m,i=null;async function l(){if(!u){await D.showMessage("Please upload a CV first.",{title:"No CV Found",type:"error"});return}if(await D.askConfirmation("This is an experimental feature using Claude AI. Are you sure?","Confirm Extraction")){n(0,f=!0);try{if(c)m=await c.arrayBuffer();else{const P=await D.resolvePath(de,u),N=await D.readBinary(P);N&&(m=N.buffer)}const o=await x(m);if(o){const N=We(o).join(" ");n(1,i=await D.tauriCommand("extract_cv_details",{preprocessedText:N})),await D.showMessage("CV details extracted. Click save to accept.","Success")}else await D.showMessage("Cannot extract CV details.",{title:"Extracted text Undefined",type:"error"})}catch(o){await D.showMessage(`Failed to process CV details: ${o}`,{title:"Failed to Extract From CV",type:"error"})}finally{n(0,f=!1)}}}async function x(e){let o=null;try{if(o=await ye(new Uint8Array(e)).promise,o===null){await D.showMessage("Failed to load PDF document",{title:"PDF Not Loaded",type:"error"});return}return(await Promise.all(Array.from({length:o.numPages},async(W,Q)=>(await(await o.getPage(Q+1)).getTextContent()).items.map(Ce=>Ce.str).join(" ")))).join(`
`)}catch(P){await D.showMessage(`Extracting text failed: ${P}`,{title:"Error",type:"error"});return}finally{o&&o.destroy()}}async function p(e){try{const o=await D.resolvePath(de,Fe);await D.write(o,JSON.stringify(e))}catch(o){throw o}}async function d(e){const{filename:o,file:P}=e.detail,N=await P.slice(0,4).arrayBuffer(),W=new Uint8Array(N);if(W[0]!==37||W[1]!==80||W[2]!==68||W[3]!==70){await D.showMessage("The uploaded file is not a valid PDF.",{title:"File is not a valid PDF",type:"error"});return}ae.set(o),c=P;try{await p({cvFilename:o,coverLetter:oe(fe)}),await D.showMessage("CV uploaded successfully!")}catch(Q){await D.showMessage(`Failed to upload CV: ${Q}`,{title:"CV Not Loaded",type:"error"})}}async function b(){try{i?await D.askConfirmation("Do you want to save the extracted details?","Confirm Save")?(X.update(o=>({...o,...i,name:o.name})),n(1,i=null),await D.showMessage("Saved details to your job application.")):(n(1,i=null),await D.showMessage("Cleared!")):await D.askConfirmation("Any previous data will be overwritten.","Update Application Details?")?(X.update(o=>({...o,experience:o.experience,interests:o.interests,projects:o.projects,education:o.education,certificates:o.certificates})),await D.showMessage("Saved")):await D.showMessage("Details were not saved.",{title:"Failed Save Attempt",type:"error"}),await p({cvFilename:oe(ae),coverLetter:oe(fe)})}catch{await D.showMessage("Save failed. Please try again.",{title:"Failed Save Attempt",type:"error"})}}ge(()=>{ae.subscribe(e=>{u=e})});function g(){s.name=this.value,X.set(s)}function y(e){a.$$.not_equal(i.experience,e)&&(i.experience=e,n(1,i))}function v(e){a.$$.not_equal(i.interests,e)&&(i.interests=e,n(1,i))}function I(e){a.$$.not_equal(i.projects,e)&&(i.projects=e,n(1,i))}function V(e){a.$$.not_equal(i.education,e)&&(i.education=e,n(1,i))}function S(e){a.$$.not_equal(i.certificates,e)&&(i.certificates=e,n(1,i))}function _(e){a.$$.not_equal(s.experience,e)&&(s.experience=e,X.set(s))}function w(e){a.$$.not_equal(s.interests,e)&&(s.interests=e,X.set(s))}function $(e){a.$$.not_equal(s.projects,e)&&(s.projects=e,X.set(s))}function T(e){a.$$.not_equal(s.education,e)&&(s.education=e,X.set(s))}function U(e){a.$$.not_equal(s.certificates,e)&&(s.certificates=e,X.set(s))}return[f,i,r,s,l,d,b,g,y,v,I,V,S,_,w,$,T,U]}class Ke extends ve{constructor(t){super(),be(this,t,He,Oe,_e,{})}}export{Ke as component};
